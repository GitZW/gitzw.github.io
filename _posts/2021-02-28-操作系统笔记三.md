---
layout:     post
title:      操作系统 学习笔记（三）
subtitle:   操作系统 学习笔记（三）
date:       2021-02-28
author:     ZW
header-img: img/mysql_img.jpg
catalog: 	 true
tags:
    - 操作系统
---


# 进程
进程是指一个具有一定独立功能的程序在一个数据集合上的一次动态执行的过程。
进程 =  程序+数据——>动态执行

## 特点：
* 动态性：客动态地创建、结束进程
* 并发性：进程既可以被独立调度并占用处理机运行
* 独立性：不同的进程的工作不相互影响
* 制约性：因访问共享数据/资源或进程间同步而产生制约

## 进程与程序的联系：
1. 进程是操作系统处于执行状态程序的抽象。程序 = 文件（静态的可执行文件）；进程 = 执行中的程序 = 程序 + 执行状态
2. 同一个程序的多次至干性过程对应为不同进程。如命令“ls”的多次执行对应多个进程
3. 进程执行需要的资源。内存：保存代码和数据；CPU：执行指令
###进程与程序的区别：
1. 进程是动态的，程序是静态的。程序是有序代码的集合；进程是程序的执行，进程有内核态/用户态
2. 进程是暂时的，程序是永久的。进程是一个状态变化的过程；程序可长久保存
3. 进程与程序的组成不同。进程的组成包括程序、数据和进程控制块

# 进程控制块(PCB Process Control Block)
定义：操作系统管理控制进程运行所用的信息集合。

操作系统用PCB来描述进程的基本情况以及运行变化的过程。

PCB是进程存在的唯一标志，每个进程都在操作系统中有一个对应的PCB


### 使用：
进程创建时生成该进程的PCB

进程终止时回收它的PCB

通过对PCB的组织管理来实现对进程的组织管理
### 内容：
* 进程标识信息。PID：进程号，UID等 哪个程序在执行，执行了几次，用户标识
* 处理机现场保存，主要就是寄存器，保存进程的运行现场信息：堆栈指针：记录堆栈现场；指令指针：记录进程运行到哪
* 进程控制信息：
    1. 调度和状态信息：进程和处理机使用情况调度
    2. 进程间通信信息：进程间通信相关的各种标识
    3. 存储管理信息：指向进程映像存储空间数据结构
    4. 进程所用资源：进程使用的系统资源，如打开文件等
    5. 有关数据结构连接信息：通过与PCB相关的进程队列实现
    
    
## 进程状态
划分在不同操作系统中可能不同，但是大致可以分为：
* 系统初始化时，创建INIT进程，INIT再负责创建其他进程；用户请求创建一个NEW PROCESS；正在运行的进程执行了创建进程的系统调用。
* 进程就绪：进程获取了除处理机之外的资源，得到了处理机即可运行
* 进程运行：内核选择一个就绪的进程，让它占用处理机（cpu）并执行
* 进程阻塞（等待）的三种情况：请求并等待系统服务，无法马上完成；启动某种操作（和其他进程协调工作），无法马上完成；需要的数据没有到达。进程自己触发阻塞，因为只有自己才知道何时需要等待某事件
* 进程抢占：进程会被抢占情况：高优先级进程就绪；进程执行当前时间用完。
* 进程唤醒的情况：需要的资源可被满足；等待的事件到达。因为自身没有占用cpu执行，所以只能被OS或其他进程唤醒
* 进程结束的情形：自愿（正常退出，错误退出），强制性的（致命错误，被其他进程所杀）

![图一](/img/2021032901.jpg)

### 三状态模型
（1）运行：当一个进程在处理机上运行时，则称该进程处于运行状态。处于此状态的进程的数目小于等于处理器的数目，对于单处理机系统，处于运行状态的进程只有一个。在没有其他进程可以执行时（如所有进程都在阻塞状态），通常会自动执行系统的空闲进程。

（2）就绪：当一个进程获得了除处理机以外的一切所需资源，一旦得到处理机即可运行，则称此进程处于就绪状态。就绪进程可以按多个优先级来划分队列。例如，当一个进程由于时间片用完而进入就绪状态时，排入低优先级队列；当进程由I／O操作完成而进入就绪状态时，排入高优先级队列。

（3）阻塞：也称为等待或睡眠状态，一个进程正在等待某一事件发生（例如请求I/O而等待I/O完成等）而暂时停止运行，这时即使把处理机分配给进程也无法运行，故称该进程处于阻塞状态。

### 进程挂起
当内存中没有就绪进程时，为了减少CPU的空闲时间，可以采用交换技术将内存中暂时不能运行的某些进程挂起，释放其所占用的内存资源，以便重新接纳一个新进程或外存上已具备运行条件的进程进入内存的进程就绪队列。进程挂起（也称换出）是指在内存中的进程被暂时移出保存到外存中（如磁盘）的过程

引起进程挂起的原因大致有以下三种：
* 用户的请求。
* 父进程的请求。
* 操作系统的原因。操作系统引起的挂起可分为以下三种：
1. 交换。当操作系统发现系统的内存资源已经不能满足运行进程的需要时，可以将当前不重要的进程挂起，以达到平衡系统负载的目的。
2. 出现问题或故障时。当系统出现故障时，操作系统会暂时将系统中涉及该故障的进程挂起（换出），等故障恢复后，再将这些进程恢复到挂起前的状态（换入，由外存调入到内存）。
3. 操作系统的需要。为监视系统的活动，操作系统可以挂起和激活（将外存中的进程调入到内存）一些记录系统资源使用状况的进程和用户进程活动的记账进程。